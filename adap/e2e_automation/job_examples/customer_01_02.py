from adap.api_automation.utils.data_util import get_data_file
from adap.e2e_automation.services_config.job_api_support import create_job_from_config_api

from adap.e2e_automation.services_config.contributor_ui_support import get_judgments

api_key = "8WizGTstVP1sxCpHCzRP"
ENV = 'qa'

sample_file = get_data_file("/upload_data_files/workflows/shared-test-data-sets/customer_01_sample_643.csv",
                            env='qa')

config = {
    # 'env': ENV,
    # 'user': {
    #     'api_key': api_key
    # },
    "job": {
        "title": "Determine If Youtube/Vimeo Videos Are About A Research Paper %s " % ENV,
        "instructions": "<h1>Overview</h1><p>We are looking for YouTube or Vimeo Videos that discuss biomedical or computer science research papers. Ideally, these videos would show a professor or graduate student presenting their paper. You will be given a paper title and video and will determine if the video is specifically discussing that paper.&nbsp;</p><hr><h1>Steps</h1><ol><li>Read the paper title.&nbsp;</li><li>Watch the first 10-20 seconds of the YouTube or Vimeo video.</li><li>Select 'Yes' if the video is a<strong>&nbsp;presentation</strong> that describes the paper in detail.</li></ol><hr><h1>Rules &amp; Tips</h1><p>You are assessing YouTube or Vimeo videos to determine if the video is about a research paper.&nbsp;</p><p><strong>How to Decide:</strong></p><ul><li><strong>YES, the video is about the research paper&nbsp;</strong>if:<ul><li>The video discusses &nbsp;the paper in detail&nbsp;<ul><li>&nbsp;This means that there is a person presenting the concepts/methods/conclusion of the paper in an academic setting &nbsp;</li></ul></li><li>The video is <strong>professional and&nbsp;</strong><strong>academic&nbsp;</strong><ul><li>ex: scientific conference presentation</li></ul></li><li><strong>Over 1 minute</strong>&nbsp;</li><li><strong>The sounds works</strong></li><li><strong>A person is talking about the paper</strong></li></ul></li><li><strong>NO, the video is not about the research paper</strong> if:<ul><li>The video is not about that specific paper</li><li>The video is too general to be about one paper</li><li>From a non-academic source&nbsp;<ul><li><strong>no</strong>\n<strong>loud music</strong></li><li><strong>no advertisements</strong><ul><li>no videos that show the paper, but don't discuss what the paper is about&nbsp;</li><li>no to paid services ('helping with IEEE projects' or 'helping with final year projects')</li></ul></li><li><strong>no movie clips</strong></li><li><strong>no religious services</strong></li><li><strong>no personal opinions</strong></li></ul></li><li>Under or near 1 minute long</li><li><strong>The sound doesn't work</strong></li><li>The video is <strong>unprofessional</strong></li></ul></li></ul><p><strong>Tips:&nbsp;</strong></p><ol><li>The video title may be similar to the paper title.</li><li>Look for the paper author's name in the video description.</li></ol><hr><h1>Examples</h1><table style=\"width: 100%;\"><tbody><tr><td style=\"width: 33.8368%; text-align: center; vertical-align: middle; background-color: rgb(143, 158, 178);\"><br><span style=\"color: rgb(255, 255, 255);\"><strong>Paper Title</strong></span><br><br></td><td style=\"width: 33.2078%; text-align: center; background-color: rgb(143, 158, 178);\"><strong><span style=\"color: rgb(255, 255, 255);\">Video</span></strong><br></td><td style=\"width: 33.3333%; text-align: center; background-color: rgb(143, 158, 178);\"><span style=\"color: rgb(255, 255, 255);\"><strong>Is the Video about the Paper?</strong></span></td></tr><tr><td style=\"width: 33.8368%; text-align: center;\"><h2>Deep Residual Learning for Image Recognition</h2></td><td style=\"width: 33.2078%;\"><br><strong>Title:</strong><br>Deep Residual Learning for Image Recognition<br><br><strong>Link:</strong>&nbsp;<br>https://www.youtube.com/watch?v=C6tLw-rPQ2o<br><br><strong>Screenshot</strong><strong>:&nbsp;</strong><br><img src=\"https://s3.amazonaws.com/crowdflower-make-cloud/images%2F1532709313387-Screen+Shot+2018-07-27+at+9.35.02+AM.png\" style=\"width: 268px; height: 211.575px;\" class=\"fr-fic fr-dib\"></td><td style=\"width: 33.3333%; vertical-align: top;\"><br><strong>Yes:</strong><br><ul><li>Video is about the paper</li><li>Video title and paper title are the same</li><li>Video has audio</li><li>Video is over 1 minute</li></ul><br></td></tr><tr><td style=\"width: 33.8368%; text-align: center; background-color: rgb(245, 246, 249);\"><h2>Genetic Algorithms in Search, Optimization, and Machine Learning</h2><br></td><td style=\"width: 33.2078%; vertical-align: top; background-color: rgb(245, 246, 249);\"><br><strong>Title:</strong><br>Genetic Algorithms in Search, Optimization, and Machine Learning<br><br><strong>Link:</strong>&nbsp;<br>https://www.youtube.com/watch?v=Xt2dujBPnTw<br><br><strong>Screenshot</strong><strong>:&nbsp;</strong><br><img src=\"https://s3.amazonaws.com/crowdflower-make-cloud/images%2F1532709399738-Screen+Shot+2018-07-27+at+9.36.30+AM.png\" style=\"width: 265px; height: 303.621px;\" class=\"fr-fic fr-dib\"></td><td style=\"width: 33.3333%; vertical-align: top; background-color: rgb(245, 246, 249);\"><br><strong>No:</strong><br><ul><li>Video is under 1 minute long</li><li>Not a presentation about the paper</li><li>Video is an advertisement for pdfcart.net</li></ul><br></td></tr><tr><td style=\"width: 33.8368%;\"><h2 style=\"text-align: center;\">Refactoring improving the design of existing code</h2><br></td><td style=\"width: 33.2078%;\"><strong>Title:</strong><br>Refactoring Book(Martin Fowler) Review<br><br><strong>Link:</strong>&nbsp;<br>https://www.youtube.com/watch?v=jRRmkyNuKNo<br><br><strong>Screenshot:</strong><br><img src=\"https://s3.amazonaws.com/crowdflower-make-cloud/images%2F1551896118948-Screen+Shot+2019-03-06+at+10.15.10+AM.png\" style=\"width: 300px;\" class=\"fr-fic fr-dib\"></td><td><strong>No:</strong><br><ul><li>This is a book review, not a presentation of the material</li><li>unprofessional</li></ul><br></td></tr><tr><td style=\"width: 33.8368%; vertical-align: middle;\"><h2 style=\"text-align: center;\">\"If you can't stand the heat, get out of the kitchen\"</h2></td><td style=\"width: 33.2078%; vertical-align: top;\"><br><strong>Title:</strong><br>Your Kid Doesn't Need an iPhone 5<br><br><strong>Link:</strong>&nbsp;<br>https://vimeo.com/87196383<br><br><strong>Screenshot</strong><strong>:&nbsp;</strong><br><img src=\"https://s3.amazonaws.com/crowdflower-make-cloud/images%2F1551896339890-Screen+Shot+2019-03-06+at+10.18.46+AM.png\" style=\"width: 300px;\" class=\"fr-fic fr-dib\"></td><td style=\"width: 33.3333%; vertical-align: top;\"><br><strong>No:</strong><br><ul><li>Completely unrelated video</li><li>Not about the paper</li><li>No personal opinions</li></ul><br></td></tr><tr><td style=\"width: 33.8368%; background-color: rgb(245, 246, 249);\"><h2 style=\"text-align: center;\">When all else fails, read the instructions</h2></td><td style=\"width: 33.2078%; vertical-align: top; background-color: rgb(245, 246, 249);\"><br><strong>Title:</strong><br>WHEN ALL ELSE FAILS READ THE INSTRUCTIONS Part 1<br><br><strong>Link:</strong>&nbsp;<br>https://www.youtube.com/watch?v=WyC16y34-6E<br><br><strong>Screenshot:&nbsp;</strong><br><img src=\"https://s3.amazonaws.com/crowdflower-make-cloud/images%2F1551896529675-Screen+Shot+2019-03-06+at+10.22.00+AM.png\" style=\"width: 300px;\" class=\"fr-fic fr-dib\"></td><td style=\"width: 33.3333%; vertical-align: top; background-color: rgb(245, 246, 249);\"><br><strong>No:</strong><br><ul><li>This video is not about the paper</li><li>The video is about an unrelated topic</li><li>This is not a scientific video</li></ul><br></td></tr></tbody></table>",
        "cml": "  \n<div class=\"row-fluid\">\n  <div class=\"span5\">\n    <h2>Step 1: Read Title and Watch Video</h2>\n    <hr />\n    <div class=\"well\">\n      <table class=\"table\">\n        <tr>\n          <td>\n            <b>Paper Title:</b>\n          </td>\n          <td>{{title}}</td>\n        </tr>\n        <tr>\n        {% assign domain = {{title}} | split: '@' %}\n          <td>\n            <b>Authors:</b>\n          </td>\n          <td>{{author}}</td>\n        </tr>\n        <tr>\n          <td>\n            <b>Video Link:</b>\n          </td>\n          <td>\n            <a target=\"_blank\" href=\"{{url}}\" class=\"btn\">Click here for Video</a>\n          </td>\n        </tr>\n      </table>\n    </div>\n  </div>\n  \n  \n  <div class=\"span7\">\n    <h2>Step 2: Answer Question</h2>\n    <hr />\n    <cml:radios label=\"Does the video discuss the paper?\" validates=\"required\" name=\"video_found_yn\" gold=\"true\"> \n      <cml:radio label=\"Yes\"></cml:radio> \n      <cml:radio label=\"No\"></cml:radio> \n    </cml:radios>\n    <br />\n  </div>\n</div>",
        "judgments_per_unit": 10,
        "max_judgments_per_worker": 100,
        "project_number": "PN000112"
    },
    "data_upload": [sample_file],
    "test_questions": 'false',
    "launch": False,
    "judgments":{
        "get_judgments": 'true',
        "contributors":{"qa+qa_automation9@figure-eight.com":"yvYfUE8nFfQwebwCTLG9!"}
    }
}


def test_create_job_01_02():
    job_id = create_job_from_config_api(config, ENV, api_key)

    # if (config['launch'] == 'true') and (config['judgments']['get_judgments'] == 'true'):
    #     get_judgments(job_id, config)


if __name__ == '__main__':
    test_create_job_01_02()